<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../../normalize.css">
  <link rel="stylesheet" href="../../Основы/Переменные/style.css">
  <title>Вложенность и параметры</title>
</head>
<body>
  <div class="wrapper">
    <header>
      <img src="../../../assets/logoJS.png" alt="JS" id="logo">
      <h1>Основной учебник</h1>
    </header>
    <main id="main">
      <div id="content">
        <div>
          <h2>Передача функций параметрами</h2>
          <p>
            Функции, подобно числам, строкам и массивам, могут передаваться параметрами в другие функции. 
          </p>
          <p>
            test(
              <br>
            	function() {return 1;}, // первый параметр
              <br>
            	function() {return 2;}  // второй параметр
              <br>
            );
            <br><br>
            function test(func1, func2) {
              <br>
            	console.log(func1); // выведет 'function() {return 1;}'
              <br>
            	console.log(func2); // выведет 'function() {return 2;}'
              <br>
            }
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 1:</span>  Сделайте функцию test, параметрами принимающую 3 функции. Передайте в нее первым параметром функцию, возвращающую 1, вторым - функцию, возвращающую 2, третьим - функцию, возвращающую 3. Выведите в консоль сумму результатов функций. 
            </p>
          </div>
          <h2>Именованные функции</h2>
          <p>
             Функции, которые передаются параметрами, не обязательно должны быть анонимными. 
          </p>
          <p>
            function get1() {
              <br>
              return 1;
              <br>
            }
            <br>
            function get2() {
              <br>
              return 2;
              <br>
            }
            <br><br>
            test(get1, get2); // выведет 3
            <br><br>
            function test(func1, func2) {
              <br>
              console.log( func1() + func2() );
              <br>
            }
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 2:</span>  Сделайте функцию test, параметрами принимающую 3 функции и возвращающую сумму результатов переданных функций. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 3:</span>  Сделайте 3 функции, объявив их как Function Declaration и дав им имена func1, func2 и func3. Пусть первая функция возвращает 1, вторая - 2, а третья - 3. Передайте эти функции параметром в функцию test из предыдущей задачи. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 4:</span>  Модифицируйте предыдущую задачу так, чтобы функции были объявлены как Function Expression с теми же именами. 
              </p>
            </div>
          </div>
          <h2>Параметры передаваемых функций</h2>
          <p>
            Давайте вызовем функцию test, передав в нее параметром анонимную функцию. Эта анонимная функции параметром будет принимать число и возвращать квадрат этого числа. 
          </p>
          <p>
            // Выведет 9:
            <br>
            test(function(num) {
              <br>
            	return num * num;
              <br>
            });
            <br><br>
            function test(func) {
              <br>
            	console.log(func(3));
              <br>
            }
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 5:</span>  Скопируйте код моей функции test. Вызовите эту функцию, передав ей параметром анонимную функцию, которая параметром будет принимать число и возвращать его куб. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 6:</span>  Переделайте ваш код так, чтобы передаваемая функция была не анонимной, а была определена как Function Declaration с именем func. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 7:</span>  Переделайте передаваемую функцию на Function Expression с тем же именем func. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 8:</span>  Пусть передаваемая функция теперь принимает два параметра и возвращает их сумму. При вызове передаваемой функции внутри test передайте в передаваемую функцию число 2 и число 3. Выведите алертом результат. 
              </p>
            </div>
          </div>
          <h2>Передадим и число параметром</h2>
          <p>
            Давайте теперь число, с которым что-то делает передаваемая функция, не будем жестко хранить внутри test, а передадим первым параметром: 
            <br><br>
            function test(num, func) { // первым параметром приходит число
              console.log(func(num));
            }
          </p>
          <p>
            В удобство нашей конструкции: у нас есть одна функция test, параметром принимающая число. Но то, что будет происходить с числом не зашито жестко в функции test. 
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 9:</span> Пусть функция test первым параметром принимает число, а вторым и третьим параметрами - функции, также параметром принимающие числа. <br><br> Пусть функция test возвращает сумму результатов переданных функций: function test(num, func1, func2) {
                return func1(num) + func2(num);
              } <br><br> Вызовите функцию test, первым параметром передав число 3, вторым параметром функцию, возводящую число в квадрат, а третьим - функцию, возводящую число в куб. Выведите результат работы в консоль. 
            </p>
          </div>
          <h2>Применение</h2>
          <p>
            Давайте сделаем функцию, которая параметром будет принимать массив, а вторым параметром - функцию. Переданная функция должна будет применится к каждому элементу массива: 
            <br><br>
            function test(arr, func) {
              <br>
              for (let i = 0; i < arr.length; i++) {
                <br>
                arr[i] = func(arr[i]);
                <br>
              }
              <br><br>
              return arr;
              <br>
            }
            <br><br>
            // Оформим код изящнее:
            <br>
            let result = test([1, 2, 3], function(num) {
              <br>
              return num * num;
              <br>
            });
            <br><br>
            console.log(result); // выведет [1, 4, 9]
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 10:</span>  Не подсматривая в мой код реализуйте такую же функцию test самостоятельно. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 11:</span>  Вызовите созданную вами функцию test, передав ей параметром массив с числами. Сделайте так, чтобы функция вернула массив с кубами этих чисел. 
              </p>
            </div>
          </div>
        </div>
        <div>
          <h2>Именованные функциональные выражения</h2>
          <p>
            Именованные функциональные выражения - Function Expression с именем её функции, доступной внутри себя самой и жестко привязаной к самой себе.
          </p>
        </div>
        <div>
          <h2>Вложенные функции</h2>
          <p>
            Пусть мы уверены, что функция square будет использоваться только в функции func и больше ни в какой другой. 
          </p>
          <p>
            function func(num1, num2) {
              <br>
              function square(num) {
                <br>
                return num * num;
                <br>
              }
              <br><br>
              return square(num1) + square(num2);
              <br>
            }
            <br><br>
            console.log(func(2, 3)); // выведет 13
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 12:</span>  Сделайте функцию func, которая параметрами будет принимать два числа, а возвращать сумму квадрата первого числа с кубом второго числа. Сделайте для этого вспомогательную функцию square, возводящую число в квадрат, и вспомогательную функцию cube, возводящую число в куб. 
            </p>
          </div>
        </div>
        <div>
          <h2>Область видимости вложенных функций</h2>
          <p>
            Переменные внешней функции видны во внутренней, Также во внутренней функции будут видны переменные, определенные снаружи внешней функции.
          </p>
          <p>
            Параметры внешней функции также будут доступны во внутренней.
          </p>
          <p>
            Если во внутренней функции изменить переменную внешней функции - она поменяется и во внешней функции.
          </p>
          <p>
            Внутренняя функция никак не сможет обратиться к внешней переменной num для того, чтобы изменить ее.
          </p>
        </div>
        <div>
          <h2>Функция, возвращающая функцию</h2>
          <p>
            Пусть у нас есть вот такая функция, возвращающая строку: <br><br>
            function func() {
              <br>
              return '!';
              <br>
            }
            <br><br>
            let result = func();
            <br>
            console.log(result); // выведет '!'
          </p>
          <p>
            Давайте теперь вместо строки, по аналогии, вернем анонимную функцию: <br><br>
            function func() {
              <br>
              return function() {
                <br>
                return '!';
                <br>
              };
              <br>
            }
            <br><br>
            let result = func(); // в переменной result будет функция
            <br>
            console.log(result); // выведет 'function() {return '!';}'
          </p>
          <p>
            Как вы видите, переменная result теперь представляет собой функцию. 
          </p>
          <p>
            Так как вызов func() возвращает функцию, то мы можем сразу же и вызвать эту возвращаемую функцию, вот так: func()() - первые круглые скобки получают результат функции func (который сам является функцией), а вторые круглые скобки применяются к результату func. <br><br>
            function func() {
              <br>
              return function() {
                <br>
                return '!';
                <br>
              };
              <br>
            }
            <br><br>
            console.log( func()() ); // выведет '!'
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 13:</span>  Сделайте функцию func1, которая будучи вызвана вот так: func1()(), вернет число 1. Сделайте аналогичную функцию func2, возвращающую число 2. Найдите сумму результатов этих функций. 
            </p>
          </div>
        </div>
        <div>
          <h2>Любой уровень вложенности</h2>
          <p>
            Могут быть и такие вызовы функций: func()()() и func()()()() - и так далее до бесконечности. 
            <br>
            Для этого нужно, чтобы внутренняя функция тоже возвращала функцию, та - еще одну и так далее. Вот пример: 
            <br><br>
            function func() {
              <br>
              return function() {
                <br>
                return function() {
                  <br>
                  return '!';
                  <br>
                };
                <br>
              };
              <br>
            }
            <br><br>
            console.log( func()()() ); // выведет '!'
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 14:</span>  Сделайте функцию func, которая будучи вызвана вот так: func()()()()(), вернет '!'. 
            </p>
          </div>
        </div>
        <div>
          <h2>Параметры возвращаемой функции</h2>
          <p>
            В изученные нами вызовы функций можно передавать параметры.
            <br>
            Давайте сделаем так, чтобы и первая функция принимала параметр, и вторая. А результатом вызова сделаем сумму этих параметров: 
            <br><br>
            function func(num1) {
              <br>
              return function(num2) {
                <br>
                return num1 + num2;
                <br>
              };
              <br>
            }
            <br><br>
            console.log( func(1)(2) ); // выведет 3
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 15:</span>  Сделайте функцию func, которая будучи вызвана вот так: func(2)(3)(4), вернет сумму переданных в параметры чисел. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 16:</span>  Сделайте функцию func, которая будучи вызвана вот так: func(2)(3)(4)(5)(), вернет массив переданных в параметры чисел. 
              </p>
            </div>
          </div>
        </div>
        <div>
          <h2>Функции-коллбэки</h2>
          <p>
            Функции можно передавать параметрами в другие функции. Такие функции-параметры называются коллбэками (англ. callback). 
          </p>
          <p>
            Пусть мы хотим сделать функцию, которая первым параметром будет принимать массив, а вторым - коллбэк, который будет применять к каждому элементу массива: 
            <br><br>
            function each(arr, callback) {
              <b></b>
              let result = [];
              <br><br>
              for (let elem of arr) {
                <b></b>
                result.push( callback(elem) ); // вызываем функцию-коллбэк
                <b></b>
              }
              <br><br>
              return result;
              <b></b>
            }
          </p>
          <p>
            Наша функция each - универсальная. Это значит, что мы можем передавать в нее различные коллбэки, выполняя разные операции над массивами. При этом код нашей функции останется неизменным - будут меняться только передаваемые коллбэки. 
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 17:</span>  Дан массив с числами. С помощью созданной нами функции each увеличьте каждый элемент в два раза. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 18:</span>  Дан массив со строками. С помощью созданной нами функции each переверните символы каждой строки в обратном порядке. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 19:</span>  Дан массив со строками. С помощью созданной нами функции each сделайте заглавным первый символ каждой строки. 
              </p>
            </div>
          </div>
        </div>
        <div>
          <h2>Стрелочные функции</h2>
          <p>
            В следующем примере кода первой написана обычная функция, а второй - соответствующая ей стрелочная (обе функции делают одно и тоже): 
            <br><br>
            let func1 = function(num1, num2) {
              <br>
              let result = num1 * num2;
              <br>
              return result;
              <br>
            }
            <br><br>
            let func2 = (num1, num2) => {
              <br>
              let result = num1 * num2;
              <br>
              return result;
              <br>
            }
          </p>
          <ul>
            <li>Если в функции одна строка кода, то в стрелочных функциях можно не писать return и фигурные скобки</li>
            <li>Если параметр стрелочной функции один - круглые скобки можно не писать</li>
            <li>Если в функции вообще нет параметров - нужно писать пустые круглые скобки</li>
          </ul>
          <p>
            Особое преимущество стрелочные функции имеют в качестве коллбэков.
          </p>
          <p>
            let result = filter([1, 2, 3, 4, 5], function(elem) {
              <br>
              if (elem % 2 === 0) {
                <br>
                return true;
                <br>
              } else {
                <br>
                return false;
                <br>
              }
              <br>
            });
            <br><br>
            let result = filter([1, 2, 3, 4, 5], function(elem) {
              <br>
              return elem % 2 == 0;
              <br>
            });
            <br><br>
            let result = filter([1, 2, 3, 4, 5], elem => elem % 2 == 0);
          </p>
        </div>
      </div>
    </main>
    <footer>
      <a href="../../basic_js_book.html">К основному учебнику</a>
    </footer>
  </div>
</body>
</html>

<script src="./func_param_and_area_of_visibiliy.js"></script>