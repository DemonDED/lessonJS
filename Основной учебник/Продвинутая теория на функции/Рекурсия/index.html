<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../../normalize.css">
  <link rel="stylesheet" href="../../Основы/Переменные/style.css">
  <title>Рекурсия</title>
</head>
<body>
  <div class="wrapper">
    <header>
      <img src="../../../assets/logoJS.png" alt="JS" id="logo">
      <h1>Основной учебник</h1>
    </header>
    <main id="main">
      <div id="content">
        <div>
          <h2>Работа с рекурсией</h2>
          <p>
            В программировании есть такое понятие, как рекурсия - это когда функция вызывает сама себя. Давайте посмотрим на примере. Выведем с помощью рекурсии числа от 1 до 10: 
            <br><br>
            let i = 1;
            <br><br>
            function func(){
              <br>
            	console.log(i);
              <br>
            	i++;
              <br><br>
            	if (i <= 10){
                <br>
            		func(); // здесь функция вызывает сама себя
                <br>
            	}
              <br>
            }
            <br>
            func();
          </p>
          <p>
            Давайте обсудим, как работает этот код.
            <br><br>
            У нас есть глобальная переменная i и функция func, внутри которой в консоль выводится содержимое переменной i, а затем делается ++.
            <br><br>
            Если наша переменная i меньше или равна 10, то функция вызывается повторно. Так как переменная i - глобальная, то при каждом новом вызове функции в ней будет заданное при предыдущем вызове значение переменной i.
            <br><br>
            Получится, что функция будет вызывать сама себя до тех пор, пока i не станет больше 10.
            <br><br>
            Учтите, что в нашем случае нельзя функцию запустить без if - если это сделать, то получится бесконечный вызов функций. 
          </p>
        </div>
        <div>
          <h2>Пример с параметром через рекурсию</h2>
          <p>
            Давайте, с помощью рекурсии последовательно выведем элементы массива. Пусть массив изначально передается параметрам функции: 
            <br><br>
            func([1, 2, 3]);
          </p>
          <p>
            Метод shift вырезает и возвращает первый элемент массива, при этом сам массив уменьшается на этот элемент. 
            <br><br>
            function func(arr) {
              <br>
              console.log(arr.shift(), arr);
              <br><br>
              if (arr.length != 0) {
                <br>
                func(arr);
                <br>
              }
              <br>
            }
            <br><br>
            func([1, 2, 3]);
          </p>
          <p>
            На самом деле, конечно же, проще всего перебрать элементы массива циклом. Приведенные примеры пока просто демонстрируют работу рекурсии на простых примерах (не жизненных). Более полезные примеры применения рекурсии просто более сложные, мы их разберем чуть ниже. 
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 1:</span>  Дан массив: let arr = [1, 2, 3, 4, 5]; С помощью рекурсии выведите элементы этого массива в консоль. 
            </p>
          </div>
        </div>
        <div>
          <h2>Сумма элементов массива при рекурсии</h2>
          <p>
            function getSum(arr) {
              <br>
              let sum = arr.shift();
              <br><br>
              if (arr.length !== 0) {
                <br>
                sum += getSum(arr);
                <br>
              }
              <br><br>
              return sum;
              <br>
            }
            <br><br>
            console.log(getSum([1, 2, 3]));
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 2:</span>  Дан массив: let arr = [1, 2, 3, 4, 5]; С помощью рекурсии найдите сумму квадратов элементов этого массива. 
            </p>
          </div>
        </div>
        <div>
          <h2>Рекурсия и многомерные структуры</h2>
          <p>
            Дан массив многомерный произвольного уровня вложенности, например, такой: 
            <br><br>
            let arr = [
            	1,
            	[
            		2, 7, 8
            	],
            	[
            		3, 4, [5, [6, 7]],
            	]
            ];
          </p>
          <p>
            Как вы видите, данный массив имеет сложную структуру, причем предполагается, что эта структура может быть произвольной и уровни вложенности могут быть сколь угодно глубоко.
            <br><br>
            Пусть мы хотим вывести в консоль все примитивные (то есть не массивы) элементы нашего массива. В этом случае для перебора такого массива у нас просто не получится использовать циклы, так как массив имеет неправильную структуру и неизвестный уровень вложенности.
            <br><br>
            Зато для перебора такого массива очень удобно будет использовать рекурсию. 
          </p>
          <p>
            function func(arr) {
              <br>
              for (let elem of arr) {
                <br>
                if (typeof elem == 'object') {
                  <br>
                  func(elem);
                  <br>
                } else {
                  <br>
                  console.log(elem);
                  <br>
                }
                <br>
              }
              <br>
            }
            <br><br>
            func([1, [2, 7, 8], [3, 4, [5, [6, 7]]]]);
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 3:</span>  Дан многомерный объект произвольного уровня вложенности, например, такой: {a: 1, b: {c: 2, d: 3, e: 4}, f: {g: 5, j: 6, k: {l: 7, m: {n: 8, o: 9}}}}  С помощью рекурсии выведите все примитивные элементы этого объекта в консоль. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 4:</span>  Дан многомерный массив произвольного уровня вложенности, например, такой: [1, [2, 7, 8], [3, 4, [5, [6, 7]]]] Напишите код, который развернет наш многомерный массив в одномерный. Для приведенного выше массива это будет выглядеть вот так: [1, 2, 7, 8, 3, 4, 5, 6, 7]
              </p>
            </div>
          </div>
        </div>
        <div>
          <h2>Сумма элементов массива через рекурсию</h2>
          <p>
            Давайте найдем сумму примитивных элементов нашего массива: 
            <br><br>
            function func(arr) {
              <b></b>
              let sum = 0;
              <br><br>
              for (let elem of arr) {
                <b></b>
                if (typeof elem == 'object') {
                  <b></b>
                  sum += func(elem);
                  <b></b>
                } else {
                  <b></b>
                  sum += elem;
                  <b></b>
                }
                <b></b>
              }
              <br><br>
              return sum;
              <b></b>
            }
            <br><br>
            console.log(func([1, [2, 7, 8], [3, 4, [5, [6, 7]]]]));
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 5:</span>  Дан многомерный объект произвольного уровня вложенности, например, такой: {a: 1, b: {c: 2, d: 3, e: 4}, f: {g: 5, j: 6, k: {l: 7, m: {n: 8, o: 9}}}}  С помощью рекурсии найдите сумму элементов этого объекта. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 6:</span>  Дан многомерный массив произвольного уровня вложенности, содержащий внутри себя строки, например, такой: ['a', ['b', 'c', 'd'], ['e', 'f', ['g', ['j', 'k']]]]  С помощью рекурсии слейте элементы этого массива в одну строку: 'abcdefgjk'
              </p>
            </div>
          </div>
        </div>
        <div>
          <h2>Манипуляции с элементами</h2>
          <p>
            Давайте что-нибудь сделаем с перебираемыми элементами массива, к примеру, запишем им в конец знак '!'. В этом случае нам придется воспользоваться обычным циклом for, а не for-of, вот так: 
            <br><br>
            function func(arr) {
              <br>
              for (let i = 0; i < arr.length; i++) {
                <br>
                if (typeof arr[i] == 'object') {
                  <br>
                  arr[i] = func(arr[i]);
                  <br>
                } else {
                  <br>
                  arr[i] = arr[i] + '!';
                  <br>
                }
                <br>
              }
              <br><br>
              return arr;
              <br>
            }
            <br><br>
            console.log(func([1, [2, 7, 8], [3, 4, [5, 6]]]));
          </p>
          <div class="task-block">
            <p class="task">
              <span class="warning">Задача 7:</span>  Дан многомерный массив произвольного уровня вложенности, например, такой: [1, [2, 7, 8], [3, 4], [5, [6, 7]]]  Возведите все элементы-числа этого массива в квадрат. 
            </p>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <a href="../../basic_js_book.html">К основному учебнику</a>
    </footer>
  </div>
</body>
</html>

<script src="./recursion.js"></script>