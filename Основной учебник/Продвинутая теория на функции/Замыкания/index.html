<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../../normalize.css">
  <link rel="stylesheet" href="../../Основы/Переменные/style.css">
  <title>Замыкания</title>
</head>
<body>
  <div class="wrapper">
    <header>
      <img src="../../../assets/logoJS.png" alt="JS" id="logo">
      <h1>Основной учебник</h1>
    </header>
    <main id="main">
      <div id="content">
        <div>
          <h2>Доступ к внешним переменным функций</h2>
          <p>
            На самом деле функция знает значения внешних переменных, даже не будучи вызванной.
          </p>
          <p>
            let num = 1; // функция в этот момент узнает, что num = 1
            <br>
            func(); // выведет 1
            <br><br>
            function func() {
              <br>
            	console.log(num);
              <br>
            }
            <br><br>
            func(); // выведет 1
            <br>
            num = 2; // функция в этот момент узнает, что num = 2
            <br>
            func(); // выведет 2
          </p>
        </div>
        <div>
          <h2>Лексическое окружение функций</h2>
          <p>
            Все внешние, доступные функции переменные, называются ее лексическим окружением (англ. LexicalEnvironment). 
          </p>
          <p>
            В следующем примере функции доступны две переменные: num1 и num2, которые и являются лексическим окружением нашей функции: 
            <br><br>
            let num1 = 1;
            <br>
            let num2 = 2;
            <br><br>
            function func() {
              <br>
            	// функция знает про переменные num1 и num2
              <br>
            }
          </p>
          <p>
            Само лексическое окружение представляет собой некий внутренний объект JavaScript, привязанный к нашей функции. В данном случае его можно представить в следующем виде: 
            <br><br>
            {num1: 1, num2: 2}
          </p>
          <p>
            Значение любой переменной лексического окружения всегда равно текущему значению этой переменной.
            <br><br>
            Когда мы пытаемся обратится к какой-либо переменной внутри функции, эта переменная вначале ищется среди локальных переменных функции и, если такой переменной там нет, то ищется в лексическом окружении функции. 
          </p>
        </div>
        <div>
          <h2>Применение лексического окружения функций</h2>
          <p>
            Пусть у нас есть функция, своим результатом возвращающая другую функцию: 
            <br><br>
            function test() {
              <br>
              return function() {
              <br><br>
              }
              <br>
            }
          </p>
          <p>
            Если родительская функция имеет какие-либо переменные, то эти переменные будут содержаться в лексическом окружении возвращаемой функции: 
            <br><br>
            function test() {
              <br>
              let num = 1; // переменная родительской функции
              <br><br>
              return function() {
                <br>
                // лексическое окружение = {num: 1}
                <br>
              }
              <br>
            }
          </p>
          <p>
            Если записать в переменную родительскую функцию, то в нее запишется возвращаемая.
            <br><br>
            В таком случае локальная переменная привяжется к лексичемкому окружению нашей функции и вызвав в любом месте кода эту функцию, мы сможем получить значение переменной, даже если в месте вызова сама по себе она не доступна.
          </p>
        </div>
        <div>
          <h2>Замыкания</h2>
          <p>
            Итак, замыкание - это функция вместе со всеми внешними переменными, которые ей доступны. Или, другими словами, замыкание - это функция вместе со своим лексическим окружением. 
          </p>
          <div class="task-list">
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 1:</span>  Самостоятельно, не подсматривая в мой код, реализуйте счетчик вызова функции, работающий на замыканиях. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 1:</span>  Пусть функция в замыкании хранит число 10. Сделайте так, чтобы каждый вызов функции уменьшал это число на 1 и выводил в консоль уменьшенное число. 
              </p>
            </div>
            <div class="task-block">
              <p class="task">
                <span class="warning">Задача 1:</span>  Модифицируйте предыдущую задачу так, чтобы отсчет доходил до 0, а затем каждый последующий вызов функции выводил в консоль сообщение о том, что отсчет окончен. 
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <a href="../../basic_js_book.html">К основному учебнику</a>
    </footer>
  </div>
</body>
</html>

<script src="./circuit.js"></script>